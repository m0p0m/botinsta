<div class="account-section-list">
  <h2>ูุฏุฑุช ุงฺฉุงูุชโูุง</h2>
  <ul class="accounts-list">
    <% if(accounts && accounts.length) { %>
      <% accounts.forEach(function(account, idx){ %>
        <li>
          <span class="account-dot <%= (idx % 2 === 0 ? 'active' : 'banned') %>"></span>
          <span class="account-user"><%= account.username %></span>
          <% if(selectedAccount === account.username){ %>
            <span class="account-switch selected">ุงูุชุฎุงุจ ุดุฏู</span>
          <% }else{ %>
            <form action="/switch-account" method="POST" style="display:inline">
              <input type="hidden" name="username" value="<%= account.username %>">
              <button type="submit" class="account-switch">ุงูุชุฎุงุจ</button>
            </form>
          <% } %>
          <form action="/remove-account" method="POST" style="display:inline">
            <input type="hidden" name="username" value="<%= account.username %>">
            <button class="remove-btn" title="ุญุฐู">๐</button>
          </form>
        </li>
      <% }) %>
    <% }else{ %>
      <li style="text-align:center;opacity:.7;">ูููุฒ ุงฺฉุงูุช ุซุจุช ูุดุฏู</li>
    <% } %>
  </ul>
  <button id="add-account-btn">+ ุงูุฒูุฏู ุงฺฉุงูุช ุฌุฏุฏ</button>
  <div id="add-account-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>ุงูุฒูุฏู ุงฺฉุงูุช ุฌุฏุฏ</h2>
      <% if (typeof error !== 'undefined' && error) { %>
        <p class="form-error"><%= error %></p>
      <% } %>
      <form action="/add-account" method="POST">
        <input type="text" name="username" placeholder="ูุงู ฺฉุงุฑุจุฑ" required>
        <input type="password" name="password" placeholder="ุฑูุฒ ุนุจูุฑ" required>
        <button type="submit">ุงูุฒูุฏู ุงฺฉุงูุช</button>
      </form>
    </div>
  </div>
</div>
<script>
const addAccountBtn = document.getElementById('add-account-btn');
const modal = document.getElementById('add-account-modal');
const closeBtn = modal && modal.querySelector('.close-btn');
if (addAccountBtn && modal) {
  addAccountBtn.addEventListener('click', () => modal.classList.add('show'));
}
if (closeBtn && modal) {
  closeBtn.addEventListener('click', () => modal.classList.remove('show'));
  window.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('show'); });
}
</script>
